# WDS Bridge Deployment Guide

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ WDS-–º–æ—Å—Ç–∞ –º–µ–∂–¥—É R2 –∏ RB2011 –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è Guest VLAN 30 –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—É—é –ª–æ–∫–∞—Ü–∏—é.

**–í–µ—Ä—Å–∏—è:** 1.0 SECURE
**–î–∞—Ç–∞:** 12 –¥–µ–∫–∞–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** Production Ready

---

## üìê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    R1 (Core Router)                         ‚îÇ
‚îÇ  - CAPsMAN Manager                                          ‚îÇ
‚îÇ  - Guest VLAN 30 (10.30.0.0/24)                            ‚îÇ
‚îÇ  - Management VLAN 99 (172.16.99.0/24)                     ‚îÇ
‚îÇ  - DHCP Server –¥–ª—è Guest + Management                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ (–ø—Ä–æ–≤–æ–¥–Ω–æ–µ)
                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    R2 (hAP ac2)                             ‚îÇ
‚îÇ  - CAPsMAN CAP (Main + Guest SSIDs)                        ‚îÇ
‚îÇ  - WDS AP (Guest-WDS SSID)                                 ‚îÇ
‚îÇ  - VLAN 30 tagged —á–µ—Ä–µ–∑ bridge                             ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  Wireless: wds-ap (Virtual AP)                             ‚îÇ
‚îÇ  - SSID: "Guest-WDS"                                       ‚îÇ
‚îÇ  - Channel: 2462 (CH11, 2.4GHz)                           ‚îÇ
‚îÇ  - Mode: ap-bridge                                         ‚îÇ
‚îÇ  - WDS: dynamic                                            ‚îÇ
‚îÇ  - Security: WPA2+WPA3 PSK                                 ‚îÇ
‚îÇ  - MAC Filter: –¢–æ–ª—å–∫–æ RB2011                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚îÇ ))) WiFi WDS Link (((
                 ‚îÇ 2.4GHz CH11, VLAN 30
                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  RB2011 (WDS Station)                       ‚îÇ
‚îÇ  - WDS Station-Bridge                                       ‚îÇ
‚îÇ  - Transparent L2 Bridge                                    ‚îÇ
‚îÇ  - Management: VLAN 99 (DHCP: 172.16.99.20-200)            ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  Wireless: wlan1                                           ‚îÇ
‚îÇ  - SSID: "Guest-WDS"                                       ‚îÇ
‚îÇ  - Mode: station-bridge                                    ‚îÇ
‚îÇ  - WDS: dynamic                                            ‚îÇ
‚îÇ  - Connects to: R2 wds-ap (MAC filtered)                   ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  LAN: ether2-10 ‚Üí bridge-guest                             ‚îÇ
‚îÇ  - Guest clients –ø–æ–ª—É—á–∞—é—Ç DHCP –æ—Ç R1                        ‚îÇ
‚îÇ  - –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è (—Ç–æ–ª—å–∫–æ Internet)                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ       ‚îÇ       ‚îÇ
         ‚îÇ       ‚îÇ       ‚îÇ (Guest clients)
         ‚ñº       ‚ñº       ‚ñº
    [Laptop] [Phone] [IoT Device]
```

---

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
RB2011 –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —É–¥–∞–ª–µ–Ω–Ω–æ–π –ª–æ–∫–∞—Ü–∏–∏ (–¥—Ä—É–≥–æ–µ –∑–¥–∞–Ω–∏–µ/—ç—Ç–∞–∂), –≥–¥–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–ª–æ–∂–∏—Ç—å –ø—Ä–æ–≤–æ–¥–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ç–∏. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å Guest VLAN 30 –Ω–∞ —ç—Ç—É –ª–æ–∫–∞—Ü–∏—é –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≥–æ—Å—Ç–µ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.

**–†–µ—à–µ–Ω–∏–µ:**
–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–æ–π WDS-–º–æ—Å—Ç –Ω–∞ 2.4GHz –º–µ–∂–¥—É R2 (AP) –∏ RB2011 (Station), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç Guest VLAN 30 –Ω–∞ LAN –ø–æ—Ä—Ç—ã RB2011.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–π SSID "Guest-WDS" (–Ω–µ –≤–∏–¥–µ–Ω –æ–±—ã—á–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º)
- ‚úÖ WPA2+WPA3 encryption
- ‚úÖ MAC filtering (—Ç–æ–ª—å–∫–æ RB2011 –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Management VLAN 99 (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- ‚úÖ RB2011 –ø–æ–ª—É—á–∞–µ—Ç management IP –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ DHCP –æ—Ç R1
- ‚úÖ Firewall –∑–∞—â–∏—Ç–∞ –Ω–∞ –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–∏
- ‚úÖ Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏
- ‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö VLANs (30 + 99)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–∑ –∞—É–¥–∏—Ç–∞:

| –ü—Ä–æ–±–ª–µ–º–∞ | CVSS | –°—Ç–∞—Ç—É—Å | –†–µ—à–µ–Ω–∏–µ |
|----------|------|--------|---------|
| –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ firewall –Ω–∞ RB2011 | 9.0 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è firewall –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| Plain text –ø–∞—Ä–æ–ª–∏ | 7.5 | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å :local –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —É–¥–∞–ª–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è |
| WPA2-only | 6.5 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | WPA2+WPA3 dual support |
| Management exposure | 7.0 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –í—ã–¥–µ–ª–µ–Ω–Ω—ã–π VLAN 99 –¥–ª—è management |
| –ù–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ –Ω–∞ R2 | 6.0 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | Firewall isolation rules |
| –ù–µ—Ç rate limiting | 5.5 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | Queue simple + ICMP limiting |
| –ñ–µ—Å—Ç–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–∞–Ω–∞–ª—É | 4.0 | ‚ö†Ô∏è –ü–æ –¥–∏–∑–∞–π–Ω—É | CH11 –≤—ã–±—Ä–∞–Ω –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ |
| –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ IP/DHCP | 5.0 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –í—ã–±–æ—Ä–æ—á–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ LAN –ø–æ—Ä—Ç–æ–≤ |
| –ù–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ | 4.5 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | Auto-recovery script –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω |
| –ù–µ—Ç MAC filtering | 6.0 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | Whitelist –Ω–∞ –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö |
| IPv6 –Ω–µ —É—á—Ç–µ–Ω | 5.0 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | IPv6 firewall rules |

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:
- **R2:** MikroTik hAP ac2 (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥ —Å 2.4GHz + 5GHz)
- **RB2011:** MikroTik RB2011 (–ª—é–±–∞—è –º–æ–¥–µ–ª—å)

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ:
- **R2:** RouterOS 6.40+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 6.49+)
- **RB2011:** RouterOS 6.40+ (—Ç–µ–∫—É—â–∞—è: 6.49.17)

### –°–µ—Ç—å:
- **R1** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ CAPsMAN Manager
- **VLAN 30** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Guest network (10.30.0.0/24)
- **VLAN 99** –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è Management (172.16.99.0/24) - —Å–º. `05-vlan-mgmt.rsc`
- **DHCP —Å–µ—Ä–≤–µ—Ä—ã** –Ω–∞ R1 –¥–ª—è –æ–±–æ–∏—Ö VLANs
  - Guest DHCP: 10.30.0.x
  - Management DHCP: 172.16.99.20-200

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- MAC –∞–¥—Ä–µ—Å **wlan1** –Ω–∞ RB2011 (–¥–ª—è R2 whitelist)
- MAC –∞–¥—Ä–µ—Å **wds-ap** –Ω–∞ R2 (–¥–ª—è RB2011 connect-list)

---

## üöÄ Deployment

### –®–∞–≥ 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

#### 0.1. –£–∑–Ω–∞—Ç—å MAC –∞–¥—Ä–µ—Å–∞

**–ù–∞ RB2011:**
```routeros
/interface wireless print detail where default-name=wlan1
# –ó–∞–ø–∏—à–∏—Ç–µ MAC address
```

**–ù–∞ R2:**
–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
```routeros
/interface wireless print detail where name=wds-ap
# –ó–∞–ø–∏—à–∏—Ç–µ MAC address
```

#### 0.2. –°–æ–∑–¥–∞—Ç—å backup

**–ù–∞ R2:**
```routeros
/system backup save name=r2-before-wds encryption=aes-sha256 password="YourBackupPassword"
```

**–ù–∞ RB2011:**
```routeros
/system backup save name=rb2011-before-wds encryption=aes-sha256 password="YourBackupPassword"
```

#### 0.3. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã

1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ –æ–±–∞ —Ä–æ—É—Ç–µ—Ä–∞:
```bash
# –ù–∞ R2
scp wifi/04-r2-wds-ap-bridge.rsc admin@192.168.1.2:/

# –ù–∞ RB2011
scp wifi/05-rb2011-wds-station-bridge.rsc admin@<current-rb2011-ip>:/
```

2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å **04-r2-wds-ap-bridge.rsc**:
```routeros
:local WDS_PASS "–í–∞—à_–°–ª–æ–∂–Ω—ã–π_–ü–∞—Ä–æ–ª—å_–ú–∏–Ω–∏–º—É–º_20_–°–∏–º–≤–æ–ª–æ–≤"
:local RB2011_WLAN_MAC "AA:BB:CC:DD:EE:FF"  # MAC wlan1 RB2011
:local CHANNEL "2462"  # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Guest WiFi –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CH11
```

3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å **05-rb2011-wds-station-bridge.rsc**:
```routeros
:local WDS_PASS "–¢–æ—Ç_–ñ–µ_–ü–∞—Ä–æ–ª—å_–ß—Ç–æ_–ò_–ù–∞_R2"
:local R2_MAC "BB:CC:DD:EE:FF:AA"  # MAC wds-ap –Ω–∞ R2 (–±—É–¥–µ—Ç –∏–∑–≤–µ—Å—Ç–µ–Ω –ø–æ—Å–ª–µ Step 1)
# MGMT_IP –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ DHCP –æ—Ç R1 (172.16.99.20-200)
```

---

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ R2 (WDS AP)

**1.1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ R2:**
```bash
ssh admin@192.168.1.2
```

**1.2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
```routeros
/import 04-r2-wds-ap-bridge.rsc
```

**1.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ WDS AP:**
```routeros
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Virtual AP
/interface wireless print detail where name=wds-ap

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# - name=wds-ap
# - mode=ap-bridge
# - ssid="Guest-WDS"
# - wds-mode=dynamic
# - running=yes
```

**1.4. –ó–∞–ø–∏—Å–∞—Ç—å MAC –∞–¥—Ä–µ—Å wds-ap:**
```routeros
/interface wireless print detail where name=wds-ap
# –ó–∞–ø–∏—à–∏—Ç–µ MAC address –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ RB2011
```

**1.5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å MAC filtering:**
```routeros
/interface wireless access-list print where interface=wds-ap

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 2 –∑–∞–ø–∏—Å–∏:
# 1. RB2011 MAC - authentication=yes
# 2. All others - authentication=no
```

**1.6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall:**
```routeros
/ip firewall filter print where comment~"WDS"

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª–∞:
# - Block management from WDS AP (input chain)
# - Isolate WDS to bridge (forward chain)
# - ICMP rate limiting
```

---

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é RB2011

**2.1. –û–±–Ω–æ–≤–∏—Ç—å R2_MAC –≤ —Ñ–∞–π–ª–µ:**

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `05-rb2011-wds-station-bridge.rsc`:
```routeros
:local R2_MAC "XX:XX:XX:XX:XX:XX"  # MAC –∏–∑ Step 1.4
```

–ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª:
```bash
scp wifi/05-rb2011-wds-station-bridge.rsc admin@<rb2011-ip>:/
```

---

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RB2011 (WDS Station)

**‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:** –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —É–¥–∞–ª–∏—Ç DHCP —Å–µ—Ä–≤–µ—Ä—ã –∏ IP –∞–¥—Ä–µ—Å–∞ –Ω–∞ LAN –ø–æ—Ä—Ç–∞—Ö!

**3.1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ RB2011:**
```bash
ssh admin@<current-rb2011-ip>
```

**3.2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
```routeros
/import 05-rb2011-wds-station-bridge.rsc

# –£ –≤–∞—Å –±—É–¥–µ—Ç 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –æ—Ç–º–µ–Ω—ã (Ctrl+C)
```

**3.3. –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:**

–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç:
- –£–¥–∞–ª–µ–Ω–∏–µ DHCP —Å–µ—Ä–≤–µ—Ä–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ IP –∞–¥—Ä–µ—Å–æ–≤ –Ω–∞ ether2-10
- –°–æ–∑–¥–∞–Ω–∏–µ bridge-guest
- –ù–∞—Å—Ç—Ä–æ–π–∫—É wlan1 –≤ —Ä–µ–∂–∏–º–µ station-bridge
- –ù–∞—Å—Ç—Ä–æ–π–∫—É firewall
- –°–æ–∑–¥–∞–Ω–∏–µ management VLAN 99

**3.4. –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ management IP:**

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞, –¥–æ—Å—Ç—É–ø –∫ RB2011 —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ VLAN 99:
```bash
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä –Ω–∞ VLAN 99 —Å IP –∏–∑ 172.16.99.0/24
# –ò–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å —á–µ—Ä–µ–∑ R1

ssh admin@172.16.99.50
```

---

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ WDS —Å–≤—è–∑–∏

**4.1. –ù–∞ RB2011 –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ R2:**
```routeros
/interface wireless registration-table print

# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å:
# interface=wlan1, mac-address=<R2 MAC>, signal-strength=-XX dBm
```

**4.2. –ù–∞ R2 –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ RB2011:**
```routeros
/interface wireless registration-table print where interface=wds-ap

# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å:
# interface=wds-ap, mac-address=<RB2011 MAC>, wds=yes
```

**4.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å bridge –Ω–∞ RB2011:**
```routeros
/interface bridge port print where bridge=bridge-guest

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
# - wlan1
# - ether2, ether3, ..., ether10
```

**4.4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ management IP —á–µ—Ä–µ–∑ DHCP:**
```routeros
# –ù–∞ RB2011 –ø—Ä–æ–≤–µ—Ä–∏—Ç—å DHCP client
/ip dhcp-client print detail where interface=vlan-mgmt

# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å:
# - status=bound
# - address=172.16.99.XX/24
# - gateway=172.16.99.1

# Ping test –∫ R1
/ping 172.16.99.1 count=10
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å replies
```

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ Management VLAN –Ω–∞ R1

**VLAN 99 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω** —á–µ—Ä–µ–∑ `05-vlan-mgmt.rsc`. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

**5.1. –ù–∞ R1 –ø—Ä–æ–≤–µ—Ä–∏—Ç—å VLAN 99:**
```routeros
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å VLAN interface
/interface vlan print where vlan-id=99
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å: vlan-mgmt, vlan-id=99

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å IP –∞–¥—Ä–µ—Å
/ip address print where interface~"vlan.*mgmt"
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å: 172.16.99.1/24

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DHCP server
/ip dhcp-server print where interface~"vlan.*mgmt"
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å: dhcp-mgmt

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DHCP pool
/ip pool print where name~"mgmt"
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å: pool-mgmt (172.16.99.20-200)
```

**5.2. –ù–∞–π—Ç–∏ IP –∞–¥—Ä–µ—Å RB2011 –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```routeros
# –ü–æ–¥–æ–∂–¥–∞—Ç—å 1-2 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞ RB2011
/ip dhcp-server lease print where server=dhcp-mgmt

# –ù–∞–π—Ç–∏ RB2011 –ø–æ MAC –∞–¥—Ä–µ—Å—É –∏–ª–∏ hostname
# –ó–∞–ø–∏—Å–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π IP (–Ω–∞–ø—Ä–∏–º–µ—Ä, 172.16.99.45)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
/ping 172.16.99.45 count=10
```

---

### –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Guest Network

**6.1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∫ LAN –ø–æ—Ä—Ç—É RB2011:**

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –Ω–æ—É—Ç–±—É–∫/—Ç–µ–ª–µ—Ñ–æ–Ω –∫ –ª—é–±–æ–º—É –ø–æ—Ä—Ç—É ether2-10 –Ω–∞ RB2011.

**6.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ IP –æ—Ç R1:**

–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å IP –∏–∑ –ø–æ–¥—Å–µ—Ç–∏ 10.30.0.0/24 (Guest VLAN).

**6.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–æ–ª—è—Ü–∏—é:**
```bash
# –° guest —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

# –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å (Internet)
ping 8.8.8.8

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å timeout (–∏–∑–æ–ª—è—Ü–∏—è)
ping 192.168.1.1    # R1 LAN
ping 192.168.1.2    # R2
ping 172.16.99.50   # RB2011 management
ping 192.168.1.10   # –õ—é–±–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ Main LAN
```

**6.4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å:**
```bash
# –° guest —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ speedtest
# –û–∂–∏–¥–∞–µ–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å: 30-80 Mbps (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ WiFi)
```

---

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: RB2011 –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ R2

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ RB2011:**
```routeros
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ wlan1 –∑–∞–ø—É—â–µ–Ω
/interface wireless print detail where default-name=wlan1
# running –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å yes

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
/interface wireless scan wlan1 duration=10

# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–µ–Ω SSID "Guest-WDS" –æ—Ç R2

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
/log print where message~"wireless"
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å WDS (–¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å –Ω–∞ –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö)
2. R2 MAC –≤ connect-list –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º
3. –°–ª–∞–±—ã–π —Å–∏–≥–Ω–∞–ª (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ/–ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è)
4. –ö–∞–Ω–∞–ª –∑–∞–Ω—è—Ç (–ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∫–∞–Ω–∞–ª)

**–†–µ—à–µ–Ω–∏–µ:**
```routeros
# –ù–∞ RB2011 –ø—Ä–æ–≤–µ—Ä–∏—Ç—å connect-list
/interface wireless connect-list print

# –û–±–Ω–æ–≤–∏—Ç—å MAC –∞–¥—Ä–µ—Å R2 –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
/interface wireless connect-list set 0 mac-address=<correct-R2-MAC>

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
/interface wireless disable wlan1
:delay 5s
/interface wireless enable wlan1
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: WDS —Å–≤—è–∑—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –Ω–æ –Ω–µ—Ç —Å–≤—è–∑–Ω–æ—Å—Ç–∏

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```routeros
# –ù–∞ RB2011 –ø—Ä–æ–≤–µ—Ä–∏—Ç—å bridge
/interface bridge port print where bridge=bridge-guest
# wlan1 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ wds-ap –Ω–∞ R2 –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º VLAN
# –ù–∞ R2:
/interface bridge vlan print where vlan-ids=30
# wds-ap –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ tagged
```

**–†–µ—à–µ–Ω–∏–µ:**
```routeros
# –ù–∞ R2 –¥–æ–±–∞–≤–∏—Ç—å wds-ap –≤ VLAN 30 –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
/interface bridge vlan set [find vlan-ids=30] tagged="bridge,ether5,ether6,wds-ap"
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: Guest —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –ø–æ–ª—É—á–∞—é—Ç IP

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```routeros
# –ù–∞ R1 –ø—Ä–æ–≤–µ—Ä–∏—Ç—å DHCP server –¥–ª—è VLAN 30
/ip dhcp-server print
/ip dhcp-server lease print where server=dhcp-guest

# –ù–∞ RB2011 –ø—Ä–æ–≤–µ—Ä–∏—Ç—å bridge forwarding
/interface bridge port print where bridge=bridge-guest
```

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ R1 —Ä–∞–∑–¥–∞–µ—Ç DHCP –Ω–∞ VLAN 30 –∏ bridge –Ω–∞ RB2011 –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.

---

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∞–±—ã–π —Å–∏–≥–Ω–∞–ª WDS

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```routeros
# –ù–∞ RB2011 –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª–∞
/interface wireless registration-table print detail

# signal-strength –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > -75 dBm
# –û–ø—Ç–∏–º–∞–ª—å–Ω–æ: -50 to -65 dBm
```

**–†–µ—à–µ–Ω–∏–µ:**

1. **–ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∞–Ω—Ç–µ–Ω–Ω:**
   - –ù–∞–ø—Ä–∞–≤–∏—Ç—å –∞–Ω—Ç–µ–Ω–Ω—ã –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞
   - –ü–æ–¥–Ω—è—Ç—å —Ä–æ—É—Ç–µ—Ä—ã –≤—ã—à–µ
   - –£–±—Ä–∞—Ç—å –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è

2. **–ò–∑–º–µ–Ω–∏—Ç—å TX power (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ):**
```routeros
# –ù–∞ R2
/interface wireless set wds-ap tx-power=20  # –∏–ª–∏ max

# –ù–∞ RB2011
/interface wireless set wlan1 tx-power=20  # –∏–ª–∏ max
```

3. **–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –∫–∞–Ω–∞–ª:**
```routeros
# –ï—Å–ª–∏ –µ—Å—Ç—å –ø–æ–º–µ—Ö–∏ –Ω–∞ CH11, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ CH1 –∏–ª–∏ CH6
# –í–ê–ñ–ù–û: –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö!

# –ù–∞ R2
/interface wireless set wds-ap frequency=2412  # CH1

# –ù–∞ RB2011
/interface wireless set wlan1 frequency=2412  # CH1
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ management RB2011

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```routeros
# –° R1 –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
/ping 172.16.99.50 source-address=172.16.99.1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ VLAN 99 –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ R1
/interface vlan print where vlan-id=99
/ip address print where interface~"vlan99"
```

**–†–µ—à–µ–Ω–∏–µ:**

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å VLAN 99 –Ω–∞ R1 (—Å–º. –®–∞–≥ 5)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ RB2011 —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∫–∞–±–µ–ª—å
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å IP –Ω–∞ vlan-mgmt:
```routeros
/ip address print where interface=vlan-mgmt
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å 172.16.99.50/24
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ WDS –∫–ª–∏–µ–Ω—Ç—ã (SECURITY ALERT)

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```routeros
# –ù–∞ R2 –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
/interface wireless registration-table print where interface=wds-ap

# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¢–û–õ–¨–ö–û 1 –∑–∞–ø–∏—Å—å (RB2011)
```

**–ï—Å–ª–∏ –±–æ–ª—å—à–µ 1:**
```routeros
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
/log print where message~"WDS Monitor"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å access-list
/interface wireless access-list print where interface=wds-ap
```

**–†–µ—à–µ–Ω–∏–µ:**

1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å WDS –ø–∞—Ä–æ–ª—å
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ MAC filtering –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –û—Ç–∫–ª—é—á–∏—Ç—å –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
```routeros
/interface wireless registration-table remove [find interface=wds-ap mac-address!=<RB2011-MAC>]
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–°–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –Ω–∞ –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö.

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
```routeros
# –ù–∞ R2
/system scheduler print where name=wds-monitor-schedule
/system script print where name=wds-monitor-r2

# –ù–∞ RB2011
/system scheduler print where name=wds-monitor-schedule
/system script print where name=wds-monitor-rb2011
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
```routeros
/log print where message~"WDS Monitor"

# –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤:
# - "WDS Monitor: OK, signal -62 dBm to XX:XX:XX:XX:XX:XX"
# - "WDS Monitor: WEAK SIGNAL -78 dBm (threshold -75 dBm)"
# - "WDS Monitor: Interface wlan1 is DOWN!"
# - "WDS Monitor: Reconnection successful"
```

### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è WDS (–≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ):**
```routeros
# –ù–∞ RB2011
/interface wireless registration-table print

# –û–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞:
# - signal-strength (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > -75 dBm)
# - tx-rate / rx-rate (—Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏)
# - uptime (–≤—Ä–µ–º—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
```routeros
# –ù–∞ R2
/tool bandwidth-test 172.16.99.50 protocol=tcp direction=both duration=30s

# –û–∂–∏–¥–∞–µ–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å: 30-80 Mbps (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Å–ª–æ–≤–∏–π)
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞–Ω–∞–ª–∞:**
```routeros
# –ù–∞ R2
/interface wireless monitor wds-ap

# –û–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞:
# - noise-floor (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < -90 dBm)
# - overall-tx-ccq (Client Connection Quality, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ > 80%)
```

---

## üîí Security Checklist

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] WDS –ø–∞—Ä–æ–ª—å –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ —Å–ª–æ–∂–Ω—ã–π (–º–∏–Ω. 20 —Å–∏–º–≤–æ–ª–æ–≤)
- [ ] MAC filtering –∞–∫—Ç–∏–≤–µ–Ω –Ω–∞ R2 (whitelist RB2011)
- [ ] Connect-list –∞–∫—Ç–∏–≤–µ–Ω –Ω–∞ RB2011 (whitelist R2)
- [ ] Firewall –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–∞ –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö
- [ ] Management RB2011 –¥–æ—Å—Ç—É–ø–µ–Ω –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ VLAN 99
- [ ] Guest –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ LAN/Management
- [ ] IPv6 firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–µ—Å–ª–∏ IPv6 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- [ ] –ù–µ–Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã (telnet, ftp, www, api)
- [ ] Monitoring —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—â–µ–Ω—ã
- [ ] Backup –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- [ ] –°–∫—Ä–∏–ø—Ç—ã —Å –ø–∞—Ä–æ–ª—è–º–∏ —É–¥–∞–ª–µ–Ω—ã –∏–∑ /files
- [ ] –¢–æ–ª—å–∫–æ 1 WDS –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ wds-ap (RB2011)

**–£–¥–∞–ª–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:**
```routeros
# –ù–∞ R2
/file remove 04-r2-wds-ap-bridge.rsc

# –ù–∞ RB2011
/file remove 05-rb2011-wds-station-bridge.rsc
```

---

## üìà Performance Tips

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–∞–Ω–∞–ª–∞

**–ò–∑–±–µ–≥–∞–π—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å –¥—Ä—É–≥–∏–º–∏ WiFi:**
```routeros
# –ù–∞ R2 —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–ø–µ–∫—Ç—Ä
/interface wireless scan wlan1 duration=10

# –í—ã–±—Ä–∞—Ç—å –Ω–∞–∏–º–µ–Ω–µ–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª –∏–∑ CH1, CH6, CH11
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è TX power

**–ù–µ –≤—Å–µ–≥–¥–∞ –±–æ–ª—å—à–µ = –ª—É—á—à–µ!**

–°–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∞—è –º–æ—â–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫:
- –£–≤–µ–ª–∏—á–µ–Ω–∏—é –ø–æ–º–µ—Ö –¥–ª—è –¥—Ä—É–≥–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –°–Ω–∏–∂–µ–Ω–∏—é –∫–∞—á–µ—Å—Ç–≤–∞ —Å–∏–≥–Ω–∞–ª–∞ –∏–∑-–∑–∞ intermodulation
- –ü–µ—Ä–µ–≥—Ä–µ–≤—É —Ä–∞–¥–∏–æ

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
```routeros
# –ù–∞—á–∞—Ç—å —Å 17 dBm
/interface wireless set wds-ap tx-power=17
/interface wireless set wlan1 tx-power=17

# –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –µ—Å–ª–∏ —Å–∏–≥–Ω–∞–ª —Å–ª–∞–±—ã–π
# –ù–µ –ø—Ä–µ–≤—ã—à–∞—Ç—å 20 dBm –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è bandwidth

**–ï—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∏–∑–∫–∞—è:**

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å interference:
```routeros
/interface wireless monitor wds-ap
# noise-floor –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < -90 dBm
```

2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å 20MHz channel width (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
```routeros
# 20MHz = –ª—É—á—à–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ –¥–∞–ª—å–Ω–æ—Å—Ç—å
# 40MHz = –≤—ã—à–µ —Å–∫–æ—Ä–æ—Å—Ç—å, –Ω–æ —Ö—É–∂–µ –≤ —É—Å–ª–æ–≤–∏—è—Ö –ø–æ–º–µ—Ö
```

3. –í–∫–ª—é—á–∏—Ç—å frame aggregation (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è):
```routeros
/interface wireless set wds-ap frame-lifetime=0
```

---

## üîÑ Rollback Plan

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

### –ù–∞ R2 (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup):
```routeros
/system backup load name=r2-before-wds
/system reboot
```

### –ù–∞ RB2011 (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup):
```routeros
/system backup load name=rb2011-before-wds
/system reboot
```

### –ë—ã—Å—Ç—Ä–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ WDS (–±–µ–∑ rollback):

**–ù–∞ R2:**
```routeros
# –û—Ç–∫–ª—é—á–∏—Ç—å WDS AP
/interface wireless disable wds-ap

# –£–¥–∞–ª–∏—Ç—å firewall –ø—Ä–∞–≤–∏–ª–∞
/ip firewall filter remove [find comment~"WDS"]

# –£–¥–∞–ª–∏—Ç—å –∏–∑ bridge
/interface bridge port remove [find interface=wds-ap]
```

**–ù–∞ RB2011:**
```routeros
# –û—Ç–∫–ª—é—á–∏—Ç—å wlan1
/interface wireless disable wlan1

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
# (—Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è IP –∞–¥—Ä–µ—Å–æ–≤ –∏ DHCP)
```

---

## üìû Support

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

```routeros
# –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ WDS
/interface wireless print detail
/interface wireless registration-table print detail
/interface wireless access-list print
/interface wireless connect-list print

# Bridge —Å—Ç–∞—Ç—É—Å
/interface bridge print detail
/interface bridge port print detail
/interface bridge vlan print detail

# Firewall
/ip firewall filter print where comment~"WDS"
/ipv6 firewall filter print where comment~"WDS"

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
/log print where message~"WDS"
/tool bandwidth-test 172.16.99.50

# –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
/system resource print
/system routerboard print
/system package print
```

---

## üìù Changelog

### Version 1.0 SECURE (12 –¥–µ–∫–∞–±—Ä—è 2025)
- ‚úÖ –ü–µ—Ä–≤—ã–π production-ready —Ä–µ–ª–∏–∑
- ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ WPA2+WPA3 support
- ‚úÖ MAC filtering –Ω–∞ –æ–±–µ–∏—Ö —Å—Ç–æ—Ä–æ–Ω–∞—Ö
- ‚úÖ –í—ã–¥–µ–ª–µ–Ω–Ω—ã–π management VLAN
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ recovery
- ‚úÖ IPv6 firewall support
- ‚úÖ Rate limiting
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–°–æ–∑–¥–∞–Ω–æ:** Claude Code (Sonnet 4.5)
**–î–∞—Ç–∞:** 12 –¥–µ–∫–∞–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ
